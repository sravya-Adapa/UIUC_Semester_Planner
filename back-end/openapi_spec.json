{
  "openapi": "3.0.3",
  "info": {
    "title": "Semester Planner API",
    "description": "API for managing courses, pathways, and semester planning for students",
    "version": "1.0.0",
    "contact": {
      "name": "API Support"
    }
  },
  "servers": [
    {
      "url": "https://api.semesterplanner.com/v1",
      "description": "Production server"
    },
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Development server"
    }
  ],
  "tags": [
    {
      "name": "Courses",
      "description": "Course management endpoints"
    },
    {
      "name": "Pathways",
      "description": "Career pathway endpoints"
    }
  ],
  "paths": {
    "/courses": {
      "get": {
        "tags": ["Courses"],
        "summary": "Get all courses",
        "description": "Retrieve a paginated list of courses with optional filtering",
        "parameters": [
          {
            "name": "department",
            "in": "query",
            "description": "Filter by department code",
            "schema": {
              "type": "string",
              "example": "CS"
            }
          },
          {
            "name": "semester",
            "in": "query",
            "description": "Filter by semester availability",
            "schema": {
              "type": "string",
              "enum": ["spring", "fall", "summer"]
            }
          },
          {
            "name": "gen_ed",
            "in": "query",
            "description": "Filter for general education courses",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "credit_hours",
            "in": "query",
            "description": "Filter by credit hours",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "maximum": 6
            }
          },
          {
            "name": "min_rating",
            "in": "query",
            "description": "Minimum course rating (0-5)",
            "schema": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 5
            }
          },
          {
            "name": "max_difficulty",
            "in": "query",
            "description": "Maximum difficulty level (0-5)",
            "schema": {
              "type": "number",
              "format": "float",
              "minimum": 0,
              "maximum": 5
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "default": 20,
              "minimum": 1,
              "maximum": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "courses": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Course"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/Pagination"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/courses/{courseId}": {
      "get": {
        "tags": ["Courses"],
        "summary": "Get course by ID",
        "description": "Retrieve detailed information about a specific course",
        "parameters": [
          {
            "name": "courseId",
            "in": "path",
            "required": true,
            "description": "Course identifier (e.g., 'CS 101')",
            "schema": {
              "type": "string",
              "example": "CS 101"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/Course"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/courses/search": {
      "get": {
        "tags": ["Courses"],
        "summary": "Search courses",
        "description": "Search courses by keyword or skills",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "Search query (searches title, description, and course ID)",
            "schema": {
              "type": "string",
              "example": "machine learning"
            }
          },
          {
            "name": "skills",
            "in": "query",
            "description": "Filter by skills (comma-separated)",
            "schema": {
              "type": "string",
              "example": "python,statistics"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "courses": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Course"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/Pagination"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          }
        }
      }
    },
    "/courses/{courseId}/prerequisites": {
      "get": {
        "tags": ["Courses"],
        "summary": "Get course prerequisites",
        "description": "Retrieve the prerequisite tree for a course with full course details",
        "parameters": [
          {
            "name": "courseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "CS 446"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "course_id": {
                          "type": "string",
                          "example": "CS 446"
                        },
                        "prerequisites": {
                          "$ref": "#/components/schemas/PrerequisiteTree"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/courses/{courseId}/instructors": {
      "get": {
        "tags": ["Courses"],
        "summary": "Get course instructors",
        "description": "Retrieve list of instructors who teach this course with their statistics",
        "parameters": [
          {
            "name": "courseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "description": "Sort instructors by metric",
            "schema": {
              "type": "string",
              "enum": ["rating", "difficulty", "avg_gpa"],
              "default": "rating"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "course_id": {
                          "type": "string"
                        },
                        "instructors": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string",
                                "example": "Butler, L"
                              },
                              "rating": {
                                "type": "number",
                                "format": "float",
                                "nullable": true
                              },
                              "difficulty": {
                                "type": "number",
                                "format": "float",
                                "nullable": true
                              },
                              "avg_gpa": {
                                "type": "number",
                                "format": "float",
                                "nullable": true
                              }
                            }
                          }
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/pathways": {
      "get": {
        "tags": ["Pathways"],
        "summary": "Get all pathways",
        "description": "Retrieve list of all available career pathways",
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "pathways": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/PathwaySummary"
                          }
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/pathways/{pathwayId}": {
      "get": {
        "tags": ["Pathways"],
        "summary": "Get pathway by ID",
        "description": "Retrieve detailed information about a specific pathway",
        "parameters": [
          {
            "name": "pathwayId",
            "in": "path",
            "required": true,
            "description": "Pathway identifier",
            "schema": {
              "type": "string",
              "example": "data_scientist"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Pathway"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/pathways/{pathwayId}/courses": {
      "get": {
        "tags": ["Pathways"],
        "summary": "Get courses for a pathway",
        "description": "Retrieve courses associated with a specific pathway",
        "parameters": [
          {
            "name": "pathwayId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by course type",
            "schema": {
              "type": "string",
              "enum": ["core", "recommended", "optional", "all"],
              "default": "all"
            }
          },
          {
            "name": "include_details",
            "in": "query",
            "description": "Include full course details instead of just IDs",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "pathway_id": {
                          "type": "string"
                        },
                        "courses": {
                          "type": "object",
                          "properties": {
                            "core": {
                              "type": "array",
                              "items": {
                                "oneOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "$ref": "#/components/schemas/Course"
                                  }
                                ]
                              }
                            },
                            "recommended": {
                              "type": "array",
                              "items": {
                                "oneOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "$ref": "#/components/schemas/Course"
                                  }
                                ]
                              }
                            },
                            "optional": {
                              "type": "array",
                              "items": {
                                "oneOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "$ref": "#/components/schemas/Course"
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/pathways/{pathwayId}/recommend": {
      "post": {
        "tags": ["Pathways"],
        "summary": "Get course recommendations",
        "description": "Generate personalized course recommendations based on pathway and student preferences",
        "parameters": [
          {
            "name": "pathwayId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["completed_courses", "current_semester"],
                "properties": {
                  "completed_courses": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": ["CS 101", "MATH 221", "CS 225"]
                  },
                  "current_semester": {
                    "type": "string",
                    "enum": ["spring", "fall", "summer"],
                    "example": "fall"
                  },
                  "credits_per_semester": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 21,
                    "default": 15
                  },
                  "preferences": {
                    "type": "object",
                    "properties": {
                      "max_difficulty": {
                        "type": "number",
                        "format": "float",
                        "minimum": 0,
                        "maximum": 5,
                        "example": 4.0
                      },
                      "preferred_instructors": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "example": ["Butler, L", "Fowler, M"]
                      },
                      "avoid_gen_eds": {
                        "type": "boolean",
                        "default": false
                      },
                      "prioritize_pathway": {
                        "type": "boolean",
                        "default": true,
                        "description": "Prioritize pathway courses over electives"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response with course recommendations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "recommendations": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "course": {
                                "$ref": "#/components/schemas/Course"
                              },
                              "reason": {
                                "type": "string",
                                "example": "Core course for Data Scientist pathway"
                              },
                              "priority": {
                                "type": "string",
                                "enum": ["high", "medium", "low"]
                              },
                              "recommended_instructor": {
                                "type": "string",
                                "nullable": true
                              }
                            }
                          }
                        },
                        "total_credits": {
                          "type": "integer"
                        },
                        "avg_difficulty": {
                          "type": "number",
                          "format": "float"
                        },
                        "prerequisites_satisfied": {
                          "type": "boolean"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Course": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "CS 101"
          },
          "course_id": {
            "type": "string",
            "example": "CS 101"
          },
          "title": {
            "type": "string",
            "example": "Intro Computing: Engrg & Sci"
          },
          "description": {
            "type": "string"
          },
          "department": {
            "type": "string",
            "example": "CS"
          },
          "credit_hours": {
            "type": "integer",
            "example": 3
          },
          "gen_ed": {
            "type": "boolean"
          },
          "semesters": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["spring", "fall", "summer"]
            }
          },
          "course_avg_rating": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "course_avg_difficulty": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "course_avg_gpa": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "prerequisites": {
            "type": "object",
            "nullable": true,
            "properties": {
              "type": {
                "type": "string",
                "enum": ["AND", "OR"]
              },
              "courses": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "instructors": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "rating": {
                  "type": "number",
                  "format": "float",
                  "nullable": true
                },
                "difficulty": {
                  "type": "number",
                  "format": "float",
                  "nullable": true
                },
                "avg_gpa": {
                  "type": "number",
                  "format": "float",
                  "nullable": true
                }
              }
            }
          }
        }
      },
      "PathwaySummary": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "data_scientist"
          },
          "name": {
            "type": "string",
            "example": "Data Scientist"
          },
          "description": {
            "type": "string"
          }
        }
      },
      "Pathway": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "data_scientist"
          },
          "name": {
            "type": "string",
            "example": "Data Scientist"
          },
          "description": {
            "type": "string"
          },
          "skills_required": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": ["python", "statistics", "machine_learning"]
          },
          "skill_weights": {
            "type": "object",
            "additionalProperties": {
              "type": "number",
              "format": "float"
            },
            "example": {
              "statistics": 0.25,
              "machine_learning": 0.25
            }
          },
          "core_courses": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": ["CS 446", "CS 412", "STAT 420"]
          },
          "recommended_courses": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "optional_courses": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "PrerequisiteTree": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["AND", "OR"]
          },
          "courses": {
            "type": "array",
            "items": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "object",
                  "properties": {
                    "course_id": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "prerequisites": {
                      "$ref": "#/components/schemas/PrerequisiteTree"
                    }
                  }
                }
              ]
            }
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "current_page": {
            "type": "integer",
            "example": 1
          },
          "total_pages": {
            "type": "integer",
            "example": 10
          },
          "total_items": {
            "type": "integer",
            "example": 200
          },
          "items_per_page": {
            "type": "integer",
            "example": 20
          },
          "has_next": {
            "type": "boolean"
          },
          "has_prev": {
            "type": "boolean"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "example": "COURSE_NOT_FOUND"
              },
              "message": {
                "type": "string",
                "example": "The requested course was not found"
              },
              "details": {
                "type": "object"
              }
            }
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Bad request",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "success": false,
              "error": {
                "code": "INVALID_PARAMETER",
                "message": "Invalid query parameter value",
                "details": {
                  "parameter": "min_rating",
                  "value": 6,
                  "expected": "Value between 0 and 5"
                }
              },
              "timestamp": "2025-11-29T10:30:00Z"
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "success": false,
              "error": {
                "code": "COURSE_NOT_FOUND",
                "message": "Course with ID 'CS 999' not found",
                "details": {}
              },
              "timestamp": "2025-11-29T10:30:00Z"
            }
          }
        }
      },
      "InternalServerError": {
        "description": "Internal server error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "success": false,
              "error": {
                "code": "INTERNAL_SERVER_ERROR",
                "message": "An unexpected error occurred",
                "details": {}
              },
              "timestamp": "2025-11-29T10:30:00Z"
            }
          }
        }
      }
    }
  }
}